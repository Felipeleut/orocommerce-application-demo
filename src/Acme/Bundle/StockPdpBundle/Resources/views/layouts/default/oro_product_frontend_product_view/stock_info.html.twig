{% block _product_view_brand_inventory_status_widget %}
    {% set qty = stock.quantity|default(0) %}
    {% set status = product.inventory_status.value|default(product.inventory_status|default(null)) %}
    {% set highlightLowInventory = oro_config_value('oro_inventory.highlight_low_inventory') %}
    {% set lowInventoryThreshold = oro_config_value('oro_inventory.low_inventory_threshold')|default(0) %}

    {% if qty > 0 %}
        {% if highlightLowInventory and lowInventoryThreshold > 0 and qty <= lowInventoryThreshold %}
            {% set stateClass = 'status-label--warning' %}
            {% set label = 'Low stock'|trans %}
        {% else %}
            {% set stateClass = 'status-label--success' %}
            {% set label = 'In stock'|trans %}
        {% endif %}
    {% else %}
        {% if status == 'In Stock' %}
            {% set stateClass = 'status-label--info' %}
            {% set label = 'In stock – contact seller'|trans %}
        {% else %}
            {% set stateClass = 'status-label--error' %}
            {% set label = 'Out of stock'|trans %}
        {% endif %}
    {% endif %}

    <span class="status-label {{ stateClass }}">
        {{ label }} - {{ qty|number_format(0, '.', ' ') }} pcs
    </span>
{% endblock %}

{% block _acme_product_stock_contact_seller_widget %}
    {% set qty = stock.quantity|default(0) %}
    {% set status = status|default(null) %}

    {% if qty == 0 and status == 'In Stock' %}
        <div class="status-label status-label--info acme-stock-contact-seller">
            {{ 'In stock – contact seller'|trans }}
        </div>
    {% endif %}
{% endblock %}